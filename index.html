<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DENEME KAFE | QR Men√º</title>

  <style>
    :root{
      --bg1:#07070c;
      --bg2:#0d1117;
      --card: rgba(255,255,255,0.06);
      --card2: rgba(255,255,255,0.09);
      --border: rgba(255,255,255,0.10);
      --text: #f8fafc;
      --muted: rgba(248,250,252,0.65);

      /* renk temasƒ± (turuncu deƒüil) */
      --accent: #ff4fd8;  /* pembe */
      --accent2: #3cffc3; /* mint */
      --accent3: #7c5cff; /* mor */

      --shadow: 0 12px 35px rgba(0,0,0,0.45);
    }

    *{
      margin:0;
      padding:0;
      box-sizing:border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body{
      background: radial-gradient(circle at top, rgba(124,92,255,0.25), transparent 55%),
                  radial-gradient(circle at bottom, rgba(60,255,195,0.15), transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    a{ color:inherit; }

    /* ===== TOP BAR ===== */
    .top-fixed{
      position: sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(16px);
      background: rgba(0,0,0,0.35);
      border-bottom: 1px solid var(--border);
      padding: 12px 14px;
      transition: transform 0.25s ease;
    }
    .top-fixed.hide{
      transform: translateY(-100%);
    }

    .top-row{
      max-width: 1100px;
      margin: auto;
      display:flex;
      align-items:center;
      justify-content: flex-end;
      gap:10px;
    }

    /* TR EN saƒü √ºst */
    .lang-switch{
      display:flex;
      gap:6px;
      padding:6px;
      border-radius: 14px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
    }
    .lang-switch button{
      border:none;
      cursor:pointer;
      background: transparent;
      color: var(--muted);
      padding: 7px 12px;
      border-radius: 12px;
      font-size: 12px;
      transition: 0.2s;
    }
    .lang-switch button.active{
      background: linear-gradient(90deg, var(--accent), var(--accent3));
      color:#0b0b12;
      font-weight:bold;
    }

    /* ===== HERO AREA ===== */
    .hero{
      max-width: 1100px;
      margin: auto;
      padding: 20px 14px 12px;
      text-align:center;
    }

    .hero-logo{
      width: 84px;
      height: 84px;
      border-radius: 22px;
      object-fit: cover;
      margin: 10px auto 12px;
      border: 1px solid rgba(255,255,255,0.15);
      background: rgba(255,255,255,0.04);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }

    .hero h1{
      font-size: 26px;
      letter-spacing: 1px;
      font-weight: 900;
      background: linear-gradient(90deg, #ffffff, rgba(255,255,255,0.65));
      -webkit-background-clip:text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }

    .hero p{
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 16px;
    }

    /* Search */
    .search-wrap{
      display:flex;
      justify-content:center;
      margin-top: 10px;
    }
    .search-wrap input{
      width: min(680px, 95%);
      padding: 15px 16px;
      border-radius: 18px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.04);
      outline:none;
      color: var(--text);
      font-size: 14px;
      transition: 0.2s;
    }
    .search-wrap input:focus{
      border-color: rgba(255,79,216,0.6);
      box-shadow: 0 0 0 4px rgba(255,79,216,0.15);
    }

    /* Categories */
    .categories{
      max-width: 1100px;
      margin: 14px auto 10px;
      padding: 0 14px;
      display:flex;
      justify-content:center;
      flex-wrap:wrap;
      gap: 10px;
    }
    .categories button{
      cursor:pointer;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.05);
      color: rgba(248,250,252,0.75);
      padding: 10px 15px;
      border-radius: 999px;
      font-size: 13px;
      transition: 0.2s;
    }
    .categories button:hover{
      transform: translateY(-2px);
    }
    .categories button.active{
      background: linear-gradient(90deg, var(--accent2), var(--accent));
      color: #071016;
      font-weight: bold;
      border: none;
    }

    /* ===== SECTION TITLE ===== */
    .section-title{
      max-width: 1100px;
      margin: 22px auto 12px;
      padding: 0 14px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
    }
    .section-title h2{
      font-size: 14px;
      color: rgba(248,250,252,0.7);
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    /* ===== SLIDER ===== */
    .slider-wrap{
      max-width: 1100px;
      margin: auto;
      padding: 0 14px;
    }
    .slider{
      display:flex;
      gap: 14px;
      overflow-x: auto;
      scroll-behavior: smooth;
      padding-bottom: 10px;
    }
    .slider::-webkit-scrollbar{ height: 7px; }
    .slider::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,0.10);
      border-radius: 99px;
    }

    .slide-card{
      min-width: 290px;
      flex: 0 0 auto;
      border-radius: 22px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,0.09), rgba(255,255,255,0.04));
      overflow:hidden;
      box-shadow: var(--shadow);
      cursor:pointer;
      transition: 0.2s;
      position: relative;
    }
    .slide-card:hover{
      transform: translateY(-4px);
      border-color: rgba(60,255,195,0.45);
    }

    .slide-img{
      height: 160px;
      background-size: cover;
      background-position: center;
      filter: brightness(1.15) contrast(1.1) saturate(1.35);
    }

    .slide-content{
      padding: 12px 14px 14px;
    }

    .slide-content h3{
      font-size: 16px;
      margin-bottom: 6px;
    }

    .slide-content p{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.4;
      margin-bottom: 10px;
    }

    .slide-bottom{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 10px;
    }

    .price{
      font-weight: 900;
      color: var(--accent2);
      font-size: 14px;
      white-space: nowrap;
    }

    .oldprice{
      font-size: 12px;
      color: rgba(248,250,252,0.45);
      text-decoration: line-through;
      margin-left: 8px;
      font-weight: normal;
    }

    .badge{
      font-size: 11px;
      padding: 7px 11px;
      border-radius: 999px;
      border: 1px solid rgba(255,79,216,0.25);
      background: rgba(255,79,216,0.14);
      color: rgba(255,79,216,0.95);
      font-weight: bold;
    }

    /* ===== MENU GRID ===== */
    .container{
      max-width: 1100px;
      margin:auto;
      padding: 0 14px 40px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 14px;
    }

    .card{
      border-radius: 22px;
      overflow:hidden;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
      cursor:pointer;
      transition: 0.2s;
    }

    .card:hover{
      transform: translateY(-4px);
      border-color: rgba(255,79,216,0.55);
    }

    .card-img{
      height: 150px;
      background-size: cover;
      background-position:center;
      filter: brightness(1.18) contrast(1.08) saturate(1.45);
    }

    .card-content{
      padding: 14px;
    }

    .card-content h3{
      font-size: 15px;
      margin-bottom: 6px;
      font-weight: 900;
    }

    .desc{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.4;
      margin-bottom: 10px;
      min-height: 35px;
    }

    .card-bottom{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 10px;
    }

    .tag{
      font-size: 11px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(60,255,195,0.25);
      background: rgba(60,255,195,0.12);
      color: rgba(60,255,195,0.95);
      font-weight: bold;
    }

    /* WhatsApp */
    .whatsapp{
      position: fixed;
      right: 16px;
      bottom: 16px;
      background: #25D366;
      color:white;
      font-weight: 900;
      font-size: 13px;
      text-decoration:none;
      padding: 14px 16px;
      border-radius: 999px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
      z-index: 90;
      transition: 0.2s;
    }
    .whatsapp:hover{
      transform: scale(1.05);
    }

    footer{
      border-top: 1px solid var(--border);
      padding: 18px 14px;
      color: rgba(248,250,252,0.55);
      font-size: 12px;
      margin-top: 25px;
    }

    .footer-row{
      max-width: 1100px;
      margin:auto;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .admin-link{
      color: rgba(248,250,252,0.7);
      text-decoration: underline;
      cursor:pointer;
      font-weight: bold;
    }

    /* ===== MODALS ===== */
    .modal{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 14px;
      z-index: 120;
    }

    .modal.show{
      display:flex;
    }

    .modal-box{
      width: min(900px, 100%);
      max-height: 90vh;
      overflow:auto;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(15,18,25,0.92);
      backdrop-filter: blur(18px);
      box-shadow: 0 20px 60px rgba(0,0,0,0.65);
      position: relative;
    }

    .modal-box::-webkit-scrollbar{ width: 8px; }
    .modal-box::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,0.12);
      border-radius: 99px;
    }

    .modal-close{
      position:absolute;
      top: 12px;
      right: 12px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
      color: white;
      cursor:pointer;
      border-radius: 12px;
      padding: 10px 12px;
      font-weight:bold;
      z-index: 5;
    }

    /* product detail modal */
    .product-modal-img{
      width: 100%;
      height: 260px;
      object-fit: cover;
      border-bottom: 1px solid rgba(255,255,255,0.12);
      filter: brightness(1.1) contrast(1.1) saturate(1.4);
      cursor: zoom-in;
    }

    .product-modal-body{
      padding: 16px;
    }

    .product-modal-body h2{
      font-size: 20px;
      margin-bottom: 8px;
      font-weight: 900;
    }

    .product-modal-body p{
      font-size: 13px;
      color: rgba(248,250,252,0.75);
      line-height: 1.55;
      margin-bottom: 14px;
    }

    .info-row{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .info-chip{
      font-size: 12px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.10);
      color: rgba(248,250,252,0.85);
    }

    .modal-price{
      font-weight: 900;
      font-size: 16px;
      color: var(--accent2);
    }

    /* full image viewer */
    .img-viewer{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.88);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 12px;
      z-index: 200;
    }
    .img-viewer.show{ display:flex; }

    .img-viewer img{
      max-width: 96vw;
      max-height: 92vh;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: 0 25px 80px rgba(0,0,0,0.75);
    }

    /* ===== ADMIN PANEL ===== */
    .admin-title{
      padding: 16px;
      border-bottom: 1px solid rgba(255,255,255,0.12);
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .admin-title h2{
      font-size: 16px;
      font-weight: 900;
    }

    .admin-title span{
      font-size: 12px;
      color: rgba(248,250,252,0.65);
    }

    .admin-content{
      padding: 16px;
    }

    .admin-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
    }

    .panel{
      border-radius: 18px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 14px;
    }

    .panel h3{
      font-size: 14px;
      margin-bottom: 10px;
      font-weight: 900;
    }

    .field{
      display:flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 10px;
    }

    .field label{
      font-size: 12px;
      color: rgba(248,250,252,0.7);
    }

    .field input, .field textarea, .field select{
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color: white;
      outline:none;
      font-size: 13px;
    }

    .field textarea{
      resize: vertical;
      min-height: 80px;
    }

    .btn{
      border:none;
      cursor:pointer;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 900;
      transition: 0.2s;
      font-size: 13px;
    }

    .btn-primary{
      background: linear-gradient(90deg, var(--accent2), var(--accent));
      color: #071016;
    }

    .btn-danger{
      background: rgba(255,70,70,0.14);
      border: 1px solid rgba(255,70,70,0.3);
      color: rgba(255,170,170,0.95);
    }

    .btn-secondary{
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
      color: rgba(248,250,252,0.9);
    }

    .btn:hover{
      transform: translateY(-2px);
    }

    .admin-list{
      display:flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
      max-height: 260px;
      overflow:auto;
      padding-right: 6px;
    }

    .admin-list::-webkit-scrollbar{ width: 7px; }
    .admin-list::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,0.12);
      border-radius: 99px;
    }

    .admin-item{
      border-radius: 16px;
      padding: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
      display:flex;
      justify-content: space-between;
      gap: 10px;
      align-items:center;
    }

    .admin-item strong{
      font-size: 13px;
      display:block;
      margin-bottom: 4px;
    }

    .admin-item small{
      color: rgba(248,250,252,0.55);
      font-size: 11px;
    }

    .admin-actions{
      display:flex;
      gap: 6px;
      flex-wrap: wrap;
      justify-content:flex-end;
    }

    .tiny{
      padding: 9px 10px;
      border-radius: 12px;
      font-size: 12px;
    }

    /* small helper text */
    .note{
      font-size: 12px;
      color: rgba(248,250,252,0.6);
      line-height: 1.5;
      margin-top: 6px;
    }

  </style>
</head>

<body>

  <!-- TOP RIGHT LANGUAGE -->
  <div class="top-fixed" id="topFixed">
    <div class="top-row">
      <div class="lang-switch">
        <button id="btnTR" class="active">TR</button>
        <button id="btnEN">EN</button>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <div class="hero">
    <img src="logo.png" class="hero-logo" alt="DENEME KAFE Logo">
    <h1 id="titleText">DENEME KAFE</h1>
    <p id="subtitleText">Lezzetli bir ≈üey yemeden gitmek yasak üòÑ</p>

    <div class="search-wrap">
      <input id="searchInput" type="text" placeholder="√úr√ºn ara... (√∂rn: latte, burger)">
    </div>
  </div>

  <!-- CATEGORIES -->
  <div class="categories" id="categoryButtons"></div>

  <!-- CAMPAIGN SLIDER -->
  <div class="section-title">
    <h2 id="campaignTitle">üî• Kampanyalar</h2>
  </div>

  <div class="slider-wrap">
    <div class="slider" id="campaignSlider"></div>
  </div>

  <!-- TODAY'S SUGGESTION -->
  <div class="section-title">
    <h2 id="todayTitle">‚≠ê G√ºn√ºn √ñnerisi</h2>
  </div>

  <div class="slider-wrap">
    <div class="slider" id="todaySlider"></div>
  </div>

  <!-- MENU GRID -->
  <div class="section-title">
    <h2 id="menuTitle">Men√º</h2>
  </div>

  <div class="container">
    <div class="grid" id="menuGrid"></div>
  </div>

  <!-- WHATSAPP BUTTON -->
  <a class="whatsapp" id="whatsappBtn" href="https://wa.me/905555555555" target="_blank">
    WhatsApp
  </a>

  <!-- FOOTER -->
  <footer>
    <div class="footer-row">
      <div>¬© 2026 DENEME KAFE | QR Men√º</div>
      <div class="admin-link" id="openAdminLink">Admin Panel</div>
    </div>
  </footer>

  <!-- PRODUCT DETAIL MODAL -->
  <div class="modal" id="productModal">
    <div class="modal-box">
      <button class="modal-close" onclick="closeProductModal()">‚úï</button>
      <img id="modalImg" class="product-modal-img" src="" alt="Product Image">
      <div class="product-modal-body">
        <h2 id="modalName">√úr√ºn</h2>
        <p id="modalDesc">A√ßƒ±klama</p>

        <div class="info-row">
          <div class="info-chip" id="modalPrep">‚è± Hazƒ±rlama: 10 dk</div>
          <div class="info-chip" id="modalCal">üî• Kalori: 350 kcal</div>
          <div class="info-chip" id="modalCat">üìå Kategori</div>
        </div>

        <div class="modal-price" id="modalPrice">‚Ç∫0</div>
      </div>
    </div>
  </div>

  <!-- IMAGE VIEWER -->
  <div class="img-viewer" id="imgViewer" onclick="closeImgViewer()">
    <img id="imgViewerImg" src="" alt="Full Image">
  </div>

  <!-- ADMIN MODAL -->
  <div class="modal" id="adminModal">
    <div class="modal-box">

      <button class="modal-close" onclick="closeAdmin()">‚úï</button>

      <div class="admin-title">
        <div>
          <h2>Admin Panel</h2>
          <span>√úr√ºn ekle / d√ºzenle / sil ‚Ä¢ Kampanya olu≈ütur</span>
        </div>
        <button class="btn btn-danger tiny" onclick="adminLogout()">√áƒ±kƒ±≈ü</button>
      </div>

      <div class="admin-content">

        <!-- LOGIN -->
        <div id="adminLoginBox" class="panel">
          <h3>Giri≈ü</h3>
          <div class="field">
            <label>Admin ≈ûifresi</label>
            <input id="adminPassInput" type="password" placeholder="≈ûifre gir">
          </div>
          <button class="btn btn-primary" onclick="adminLogin()">Giri≈ü Yap</button>
          <div class="note">≈ûifre ≈üimdilik: <b>1234</b></div>
        </div>

        <!-- ADMIN AREA -->
        <div id="adminArea" style="display:none;">

          <div class="admin-grid">

            <!-- CATEGORY MANAGER -->
            <div class="panel">
              <h3>Kategori Y√∂netimi</h3>

              <div class="field">
                <label>Yeni Kategori Adƒ±</label>
                <input id="newCategoryName" placeholder="√ñrn: Kahvaltƒ±">
              </div>

              <button class="btn btn-primary" onclick="addCategory()">Kategori Ekle</button>

              <div class="admin-list" id="categoryList"></div>
            </div>

            <!-- PRODUCT FORM -->
            <div class="panel">
              <h3 id="productFormTitle">Yeni √úr√ºn Ekle</h3>

              <div class="field">
                <label>√úr√ºn Adƒ± (TR)</label>
                <input id="pNameTR" placeholder="√ñrn: Tavuklu Wrap">
              </div>

              <div class="field">
                <label>√úr√ºn Adƒ± (EN)</label>
                <input id="pNameEN" placeholder="Example: Chicken Wrap">
              </div>

              <div class="field">
                <label>A√ßƒ±klama (TR)</label>
                <textarea id="pDescTR" placeholder="√úr√ºn a√ßƒ±klamasƒ±..."></textarea>
              </div>

              <div class="field">
                <label>A√ßƒ±klama (EN)</label>
                <textarea id="pDescEN" placeholder="Product description..."></textarea>
              </div>

              <div class="field">
                <label>Kategori</label>
                <select id="pCategory"></select>
              </div>

              <div class="field">
                <label>Fiyat</label>
                <input id="pPrice" placeholder="√ñrn: 190‚Ç∫">
              </div>

              <div class="field">
                <label>Hazƒ±rlama S√ºresi (dk)</label>
                <input id="pPrep" type="number" placeholder="√ñrn: 12">
              </div>

              <div class="field">
                <label>Kalori (kcal)</label>
                <input id="pCal" type="number" placeholder="√ñrn: 420">
              </div>

              <div class="field">
                <label>√úr√ºn G√∂rseli (Dosya Se√ß)</label>
                <input id="pImgFile" type="file" accept="image/*">
              </div>

              <div class="field">
                <label>Kampanya √úr√ºn√º m√º?</label>
                <select id="pIsCampaign">
                  <option value="no">Hayƒ±r</option>
                  <option value="yes">Evet</option>
                </select>
              </div>

              <div class="field" id="campaignPriceBox" style="display:none;">
                <label>Kampanya Fiyatƒ±</label>
                <input id="pCampaignPrice" placeholder="√ñrn: 149‚Ç∫">
              </div>

              <button class="btn btn-primary" onclick="saveProduct()">Kaydet</button>
              <button class="btn btn-secondary" onclick="resetProductForm()" style="margin-top:8px;">Formu Temizle</button>

              <div class="note">
                Not: √úr√ºn g√∂rseli dosyadan y√ºklenir. GitHub Pages i√ßin en iyi sistem budur.
              </div>
            </div>

            <!-- PRODUCT LIST -->
            <div class="panel">
              <h3>√úr√ºnler</h3>
              <div class="admin-list" id="productList"></div>
            </div>

          </div>

        </div>

      </div>

    </div>
  </div>

<script>
/* =========================
   TRANSLATIONS
========================= */
let currentLang = "tr";
let currentCategory = "all";

const translations = {
  tr: {
    subtitle: "Lezzetli bir ≈üey yemeden gitmek yasak üòÑ",
    search: "√úr√ºn ara... (√∂rn: latte, burger)",
    all: "T√ºm√º",
    campaign: "Kampanya",
    whatsapp: "WhatsApp",
    campaignsTitle: "üî• Kampanyalar",
    todayTitle: "‚≠ê G√ºn√ºn √ñnerisi",
    menuTitle: "Men√º",
    prep: "Hazƒ±rlama",
    cal: "Kalori"
  },
  en: {
    subtitle: "You are not leaving without tasting something üòÑ",
    search: "Search item... (ex: latte, burger)",
    all: "All",
    campaign: "Campaign",
    whatsapp: "WhatsApp",
    campaignsTitle: "üî• Campaign Deals",
    todayTitle: "‚≠ê Today's Pick",
    menuTitle: "Menu",
    prep: "Prep time",
    cal: "Calories"
  }
};

/* =========================
   DEFAULT DATA
========================= */
const defaultCategories = [
  { id:"salty", tr:"Tuzlu", en:"Savory" },
  { id:"sweet", tr:"Tatlƒ±", en:"Dessert" },
  { id:"drinks", tr:"ƒ∞√ßecekler", en:"Drinks" }
];

const defaultItems = [
  {
    id: crypto.randomUUID(),
    category: "salty",
    isCampaign: true,
    campaignPrice: "169‚Ç∫",
    tr: { name:"Cheddar Burger", desc:"Dana eti, cheddar peyniri, karamelize soƒüan ve √∂zel sos." },
    en: { name:"Cheddar Burger", desc:"Beef patty, cheddar cheese, caramelized onion and signature sauce." },
    price:"220‚Ç∫",
    prep: 15,
    cal: 780,
    img:"https://images.unsplash.com/photo-1550547660-d9450f859349?auto=format&fit=crop&w=1200&q=70"
  },
  {
    id: crypto.randomUUID(),
    category: "sweet",
    isCampaign: true,
    campaignPrice: "119‚Ç∫",
    tr: { name:"San Sebastian", desc:"Karamelize √ºst katman, kremsi i√ß doku." },
    en: { name:"San Sebastian", desc:"Caramelized top layer with creamy center." },
    price:"150‚Ç∫",
    prep: 8,
    cal: 540,
    img:"https://images.unsplash.com/photo-1542826438-bd32f43d626f?auto=format&fit=crop&w=1200&q=70"
  },
  {
    id: crypto.randomUUID(),
    category: "drinks",
    isCampaign: false,
    campaignPrice: "",
    tr: { name:"Iced Latte", desc:"Espresso, s√ºt ve buz ile ferahlatƒ±cƒ± lezzet." },
    en: { name:"Iced Latte", desc:"Espresso, milk and ice - refreshing taste." },
    price:"120‚Ç∫",
    prep: 4,
    cal: 180,
    img:"https://images.unsplash.com/photo-1517701550927-30cf4ba1dba5?auto=format&fit=crop&w=1200&q=70"
  },
  {
    id: crypto.randomUUID(),
    category: "salty",
    isCampaign: false,
    campaignPrice: "",
    tr: { name:"Tavuklu Wrap", desc:"Izgara tavuk, ye≈üillik, √∂zel sos ve lava≈ü." },
    en: { name:"Chicken Wrap", desc:"Grilled chicken, greens, signature sauce and tortilla." },
    price:"170‚Ç∫",
    prep: 10,
    cal: 520,
    img:"https://images.unsplash.com/photo-1604908177522-429cd0a9f5b2?auto=format&fit=crop&w=1200&q=70"
  },
  {
    id: crypto.randomUUID(),
    category: "sweet",
    isCampaign: false,
    campaignPrice: "",
    tr: { name:"Brownie", desc:"Sƒ±cak brownie, yanƒ±nda vanilyalƒ± dondurma." },
    en: { name:"Brownie", desc:"Warm brownie served with vanilla ice cream." },
    price:"140‚Ç∫",
    prep: 6,
    cal: 620,
    img:"https://images.unsplash.com/photo-1614707267537-2b3c4c0b5b2b?auto=format&fit=crop&w=1200&q=70"
  }
];

/* =========================
   STORAGE
========================= */
function loadData(){
  const cats = JSON.parse(localStorage.getItem("deneme_categories"));
  const items = JSON.parse(localStorage.getItem("deneme_items"));

  return {
    categories: cats && cats.length ? cats : defaultCategories,
    items: items && items.length ? items : defaultItems
  };
}

function saveData(){
  localStorage.setItem("deneme_categories", JSON.stringify(categories));
  localStorage.setItem("deneme_items", JSON.stringify(menuItems));
}

let { categories, items } = loadData();
let menuItems = items;

/* =========================
   UI RENDER
========================= */
function renderCategories(){
  const catDiv = document.getElementById("categoryButtons");
  catDiv.innerHTML = "";

  const btnAll = document.createElement("button");
  btnAll.innerText = translations[currentLang].all;
  btnAll.classList.toggle("active", currentCategory === "all");
  btnAll.onclick = () => { currentCategory = "all"; renderCategories(); renderAll(); };
  catDiv.appendChild(btnAll);

  const btnCampaign = document.createElement("button");
  btnCampaign.innerText = translations[currentLang].campaign;
  btnCampaign.classList.toggle("active", currentCategory === "campaign");
  btnCampaign.onclick = () => { currentCategory = "campaign"; renderCategories(); renderAll(); };
  catDiv.appendChild(btnCampaign);

  categories.forEach(cat=>{
    const btn = document.createElement("button");
    btn.innerText = currentLang === "tr" ? cat.tr : cat.en;
    btn.classList.toggle("active", currentCategory === cat.id);
    btn.onclick = () => { currentCategory = cat.id; renderCategories(); renderAll(); };
    catDiv.appendChild(btn);
  });
}

function getFilteredItems(){
  const searchValue = document.getElementById("searchInput").value.toLowerCase();

  return menuItems.filter(item=>{
    const langData = item[currentLang];
    const matchSearch = langData.name.toLowerCase().includes(searchValue) || langData.desc.toLowerCase().includes(searchValue);

    if(currentCategory === "all"){
      return matchSearch;
    }

    if(currentCategory === "campaign"){
      return item.isCampaign && matchSearch;
    }

    // category filter
    if(item.isCampaign && currentCategory !== "all"){
      // kampanyalar sadece t√ºm√º ve kampanya i√ßinde g√∂z√ºks√ºn
      return false;
    }

    return item.category === currentCategory && matchSearch;
  });
}

function renderGrid(){
  const grid = document.getElementById("menuGrid");
  grid.innerHTML = "";

  const filtered = getFilteredItems();

  filtered.forEach(item=>{
    const langData = item[currentLang];

    const card = document.createElement("div");
    card.className = "card";
    card.onclick = ()=> openProductModal(item.id);

    card.innerHTML = `
      <div class="card-img" style="background-image:url('${item.img}')"></div>
      <div class="card-content">
        <h3>${langData.name}</h3>
        <p class="desc">${langData.desc}</p>

        <div class="card-bottom">
          <div class="price">
            ${item.isCampaign ? item.campaignPrice + `<span class="oldprice">${item.price}</span>` : item.price}
          </div>
          <div class="tag">${item.isCampaign ? "üî• % ƒ∞ndirim" : "‚ú® Taze"}</div>
        </div>
      </div>
    `;

    grid.appendChild(card);
  });
}

function renderCampaignSlider(){
  const slider = document.getElementById("campaignSlider");
  slider.innerHTML = "";

  const campaigns = menuItems.filter(i=> i.isCampaign);

  campaigns.forEach(item=>{
    const langData = item[currentLang];

    const slide = document.createElement("div");
    slide.className = "slide-card";
    slide.onclick = ()=> openProductModal(item.id);

    slide.innerHTML = `
      <div class="slide-img" style="background-image:url('${item.img}')"></div>
      <div class="slide-content">
        <h3>${langData.name}</h3>
        <p>${langData.desc}</p>
        <div class="slide-bottom">
          <div class="price">${item.campaignPrice} <span class="oldprice">${item.price}</span></div>
          <div class="badge">üî• Kampanya</div>
        </div>
      </div>
    `;

    slider.appendChild(slide);
  });
}

function renderTodaySlider(){
  const slider = document.getElementById("todaySlider");
  slider.innerHTML = "";

  // G√ºn√ºn √∂nerisi random 2 √ºr√ºn se√ß
  const picks = [...menuItems].sort(()=> 0.5 - Math.random()).slice(0,2);

  picks.forEach(item=>{
    const langData = item[currentLang];

    const slide = document.createElement("div");
    slide.className = "slide-card";
    slide.onclick = ()=> openProductModal(item.id);

    slide.innerHTML = `
      <div class="slide-img" style="background-image:url('${item.img}')"></div>
      <div class="slide-content">
        <h3>${langData.name}</h3>
        <p>${langData.desc}</p>
        <div class="slide-bottom">
          <div class="price">${item.price}</div>
          <div class="badge">‚≠ê √ñneri</div>
        </div>
      </div>
    `;

    slider.appendChild(slide);
  });
}

function renderAll(){
  renderCampaignSlider();
  renderTodaySlider();
  renderGrid();
}

/* =========================
   PRODUCT MODAL
========================= */
function openProductModal(id){
  const item = menuItems.find(i=> i.id === id);
  if(!item) return;

  const langData = item[currentLang];

  document.getElementById("modalImg").src = item.img;
  document.getElementById("modalName").innerText = langData.name;
  document.getElementById("modalDesc").innerText = langData.desc;

  document.getElementById("modalPrep").innerText =
    `‚è± ${translations[currentLang].prep}: ${item.prep} dk`;

  document.getElementById("modalCal").innerText =
    `üî• ${translations[currentLang].cal}: ${item.cal} kcal`;

  const catObj = categories.find(c=> c.id === item.category);
  document.getElementById("modalCat").innerText =
    `üìå ${(catObj ? (currentLang==="tr" ? catObj.tr : catObj.en) : item.category)}`;

  document.getElementById("modalPrice").innerHTML =
    item.isCampaign
      ? `${item.campaignPrice} <span class="oldprice">${item.price}</span>`
      : item.price;

  document.getElementById("productModal").classList.add("show");

  document.getElementById("modalImg").onclick = ()=>{
    openImgViewer(item.img);
  };
}

function closeProductModal(){
  document.getElementById("productModal").classList.remove("show");
}

function openImgViewer(src){
  document.getElementById("imgViewerImg").src = src;
  document.getElementById("imgViewer").classList.add("show");
}

function closeImgViewer(){
  document.getElementById("imgViewer").classList.remove("show");
}

/* =========================
   LANGUAGE
========================= */
function setLanguage(lang){
  currentLang = lang;

  document.getElementById("btnTR").classList.toggle("active", lang==="tr");
  document.getElementById("btnEN").classList.toggle("active", lang==="en");

  document.getElementById("subtitleText").innerText = translations[lang].subtitle;
  document.getElementById("searchInput").placeholder = translations[lang].search;

  document.getElementById("campaignTitle").innerText = translations[lang].campaignsTitle;
  document.getElementById("todayTitle").innerText = translations[lang].todayTitle;
  document.getElementById("menuTitle").innerText = translations[lang].menuTitle;

  document.getElementById("whatsappBtn").innerText = translations[lang].whatsapp;

  renderCategories();
  renderAll();
}

/* =========================
   HEADER HIDE ON SCROLL
========================= */
let lastScroll = 0;
const header = document.getElementById("topFixed");

window.addEventListener("scroll", ()=>{
  const current = window.pageYOffset;
  if(current > lastScroll && current > 100){
    header.classList.add("hide");
  }else{
    header.classList.remove("hide");
  }
  lastScroll = current;
});

/* =========================
   ADMIN PANEL (MODAL)
========================= */
let adminLoggedIn = false;
let editProductId = null;
const adminPassword = "1234";

document.getElementById("openAdminLink").addEventListener("click", ()=>{
  document.getElementById("adminModal").classList.add("show");
  refreshAdminUI();
});

function closeAdmin(){
  document.getElementById("adminModal").classList.remove("show");
}

function adminLogin(){
  const pass = document.getElementById("adminPassInput").value;
  if(pass === adminPassword){
    adminLoggedIn = true;
    refreshAdminUI();
  }else{
    alert("≈ûifre yanlƒ±≈ü!");
  }
}

function adminLogout(){
  adminLoggedIn = false;
  refreshAdminUI();
}

function refreshAdminUI(){
  document.getElementById("adminLoginBox").style.display = adminLoggedIn ? "none" : "block";
  document.getElementById("adminArea").style.display = adminLoggedIn ? "block" : "none";

  if(adminLoggedIn){
    fillCategorySelect();
    renderAdminCategoryList();
    renderAdminProductList();
  }
}

function fillCategorySelect(){
  const sel = document.getElementById("pCategory");
  sel.innerHTML = "";
  categories.forEach(cat=>{
    const opt = document.createElement("option");
    opt.value = cat.id;
    opt.innerText = cat.tr + " / " + cat.en;
    sel.appendChild(opt);
  });
}

document.getElementById("pIsCampaign").addEventListener("change", ()=>{
  document.getElementById("campaignPriceBox").style.display =
    document.getElementById("pIsCampaign").value === "yes" ? "block" : "none";
});

/* =========================
   CATEGORY CRUD
========================= */
function addCategory(){
  const name = document.getElementById("newCategoryName").value.trim();
  if(!name) return alert("Kategori adƒ± bo≈ü olamaz.");

  const id = name.toLowerCase()
    .replaceAll("ƒ±","i")
    .replaceAll("ƒü","g")
    .replaceAll("√º","u")
    .replaceAll("≈ü","s")
    .replaceAll("√∂","o")
    .replaceAll("√ß","c")
    .replace(/\s+/g,"-");

  if(categories.some(c=> c.id === id)){
    return alert("Bu kategori zaten var.");
  }

  categories.push({ id, tr: name, en: name });
  document.getElementById("newCategoryName").value = "";

  saveData();
  renderCategories();
  refreshAdminUI();
  renderAll();
}

function renderAdminCategoryList(){
  const list = document.getElementById("categoryList");
  list.innerHTML = "";

  categories.forEach(cat=>{
    const div = document.createElement("div");
    div.className = "admin-item";

    div.innerHTML = `
      <div>
        <strong>${cat.tr}</strong>
        <small>${cat.id}</small>
      </div>
      <div class="admin-actions">
        <button class="btn btn-danger tiny" onclick="deleteCategory('${cat.id}')">Sil</button>
      </div>
    `;
    list.appendChild(div);
  });
}

function deleteCategory(id){
  const used = menuItems.some(i=> i.category === id);
  if(used){
    return alert("Bu kategoriye baƒülƒ± √ºr√ºnler var. √ñnce √ºr√ºnleri sil/d√ºzenle.");
  }

  categories = categories.filter(c=> c.id !== id);
  saveData();
  renderCategories();
  refreshAdminUI();
  renderAll();
}

/* =========================
   PRODUCT CRUD
========================= */
function resetProductForm(){
  editProductId = null;
  document.getElementById("productFormTitle").innerText = "Yeni √úr√ºn Ekle";

  document.getElementById("pNameTR").value = "";
  document.getElementById("pNameEN").value = "";
  document.getElementById("pDescTR").value = "";
  document.getElementById("pDescEN").value = "";
  document.getElementById("pPrice").value = "";
  document.getElementById("pPrep").value = "";
  document.getElementById("pCal").value = "";
  document.getElementById("pImgFile").value = "";

  document.getElementById("pIsCampaign").value = "no";
  document.getElementById("pCampaignPrice").value = "";
  document.getElementById("campaignPriceBox").style.display = "none";
}

function saveProduct(){
  const nameTR = document.getElementById("pNameTR").value.trim();
  const nameEN = document.getElementById("pNameEN").value.trim();
  const descTR = document.getElementById("pDescTR").value.trim();
  const descEN = document.getElementById("pDescEN").value.trim();
  const category = document.getElementById("pCategory").value;
  const price = document.getElementById("pPrice").value.trim();
  const prep = parseInt(document.getElementById("pPrep").value || "0");
  const cal = parseInt(document.getElementById("pCal").value || "0");

  const isCampaign = document.getElementById("pIsCampaign").value === "yes";
  const campaignPrice = document.getElementById("pCampaignPrice").value.trim();

  if(!nameTR || !descTR || !price){
    return alert("TR isim, a√ßƒ±klama ve fiyat zorunlu.");
  }

  if(isCampaign && !campaignPrice){
    return alert("Kampanya fiyatƒ± gir.");
  }

  const fileInput = document.getElementById("pImgFile");
  const file = fileInput.files[0];

  const finalizeSave = (imgSrc) => {
    if(editProductId){
      const item = menuItems.find(i=> i.id === editProductId);
      if(!item) return;

      item.tr.name = nameTR;
      item.en.name = nameEN || nameTR;
      item.tr.desc = descTR;
      item.en.desc = descEN || descTR;
      item.category = category;
      item.price = price;
      item.prep = prep || 0;
      item.cal = cal || 0;
      item.isCampaign = isCampaign;
      item.campaignPrice = isCampaign ? campaignPrice : "";

      if(imgSrc){
        item.img = imgSrc;
      }

    }else{
      menuItems.push({
        id: crypto.randomUUID(),
        category,
        isCampaign,
        campaignPrice: isCampaign ? campaignPrice : "",
        tr: { name: nameTR, desc: descTR },
        en: { name: nameEN || nameTR, desc: descEN || descTR },
        price,
        prep: prep || 0,
        cal: cal || 0,
        img: imgSrc || "https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=1200&q=70"
      });
    }

    saveData();
    refreshAdminUI();
    renderAll();
    resetProductForm();
    alert("Kaydedildi!");
  };

  if(file){
    const reader = new FileReader();
    reader.onload = function(e){
      finalizeSave(e.target.result);
    };
    reader.readAsDataURL(file);
  }else{
    finalizeSave(null);
  }
}

function renderAdminProductList(){
  const list = document.getElementById("productList");
  list.innerHTML = "";

  menuItems.forEach(item=>{
    const div = document.createElement("div");
    div.className = "admin-item";

    div.innerHTML = `
      <div>
        <strong>${item.tr.name}</strong>
        <small>${item.category} ‚Ä¢ ${item.price}</small>
      </div>
      <div class="admin-actions">
        <button class="btn btn-secondary tiny" onclick="editProduct('${item.id}')">D√ºzenle</button>
        <button class="btn btn-danger tiny" onclick="deleteProduct('${item.id}')">Sil</button>
      </div>
    `;
    list.appendChild(div);
  });
}

function editProduct(id){
  const item = menuItems.find(i=> i.id === id);
  if(!item) return;

  editProductId = id;

  document.getElementById("productFormTitle").innerText = "√úr√ºn D√ºzenle";

  document.getElementById("pNameTR").value = item.tr.name;
  document.getElementById("pNameEN").value = item.en.name;
  document.getElementById("pDescTR").value = item.tr.desc;
  document.getElementById("pDescEN").value = item.en.desc;
  document.getElementById("pCategory").value = item.category;
  document.getElementById("pPrice").value = item.price;
  document.getElementById("pPrep").value = item.prep;
  document.getElementById("pCal").value = item.cal;

  document.getElementById("pIsCampaign").value = item.isCampaign ? "yes" : "no";
  document.getElementById("campaignPriceBox").style.display = item.isCampaign ? "block" : "none";
  document.getElementById("pCampaignPrice").value = item.campaignPrice || "";

  window.alert("≈ûimdi √ºr√ºn√º d√ºzenleyip Kaydet'e basabilirsin.");
}

function deleteProduct(id){
  if(!confirm("Bu √ºr√ºn√º silmek istediƒüine emin misin?")) return;
  menuItems = menuItems.filter(i=> i.id !== id);
  saveData();
  refreshAdminUI();
  renderAll();
}

/* =========================
   EVENTS
========================= */
document.getElementById("btnTR").addEventListener("click", ()=> setLanguage("tr"));
document.getElementById("btnEN").addEventListener("click", ()=> setLanguage("en"));
document.getElementById("searchInput").addEventListener("input", renderAll);

/* =========================
   INIT
========================= */
setLanguage("tr");
renderCategories();
renderAll();

</script>

</body>
</html>
